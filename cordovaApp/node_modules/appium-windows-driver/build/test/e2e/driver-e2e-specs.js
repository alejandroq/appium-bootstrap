'use strict';

var _regeneratorRuntime = require('babel-runtime/regenerator')['default'];

var _interopRequireDefault = require('babel-runtime/helpers/interop-require-default')['default'];

var _this = this;

var _wd = require('wd');

var _wd2 = _interopRequireDefault(_wd);

var _chai = require('chai');

var _chai2 = _interopRequireDefault(_chai);

var _chaiAsPromised = require('chai-as-promised');

var _chaiAsPromised2 = _interopRequireDefault(_chaiAsPromised);

var _libServer = require('../../lib/server');

_chai2['default'].should();
_chai2['default'].use(_chaiAsPromised2['default']);

var TEST_PORT = 4788;
var TEST_HOST = "localhost";

var server = undefined,
    driver = undefined;

describe('Driver', function () {
  before(function callee$1$0() {
    return _regeneratorRuntime.async(function callee$1$0$(context$2$0) {
      while (1) switch (context$2$0.prev = context$2$0.next) {
        case 0:
          context$2$0.next = 2;
          return _regeneratorRuntime.awrap((0, _libServer.startServer)(TEST_PORT, TEST_HOST));

        case 2:
          server = context$2$0.sent;

        case 3:
        case 'end':
          return context$2$0.stop();
      }
    }, null, _this);
  });

  after(function callee$1$0() {
    return _regeneratorRuntime.async(function callee$1$0$(context$2$0) {
      while (1) switch (context$2$0.prev = context$2$0.next) {
        case 0:
          context$2$0.next = 2;
          return _regeneratorRuntime.awrap(server.close());

        case 2:
        case 'end':
          return context$2$0.stop();
      }
    }, null, _this);
  });

  beforeEach(function callee$1$0() {
    return _regeneratorRuntime.async(function callee$1$0$(context$2$0) {
      while (1) switch (context$2$0.prev = context$2$0.next) {
        case 0:
          driver = _wd2['default'].promiseChainRemote(TEST_HOST, TEST_PORT);

        case 1:
        case 'end':
          return context$2$0.stop();
      }
    }, null, _this);
  });

  afterEach(function callee$1$0() {
    return _regeneratorRuntime.async(function callee$1$0$(context$2$0) {
      while (1) switch (context$2$0.prev = context$2$0.next) {
        case 0:
          context$2$0.next = 2;
          return _regeneratorRuntime.awrap(driver.quit());

        case 2:
        case 'end':
          return context$2$0.stop();
      }
    }, null, _this);
  });

  it('should run a basic session using a real client', function callee$1$0() {
    return _regeneratorRuntime.async(function callee$1$0$(context$2$0) {
      while (1) switch (context$2$0.prev = context$2$0.next) {
        case 0:
          context$2$0.next = 2;
          return _regeneratorRuntime.awrap(driver.init({
            app: "Microsoft.WindowsCalculator_8wekyb3d8bbwe!App",
            platformName: "Windows",
            deviceName: "WindowsPC"
          }));

        case 2:
          context$2$0.next = 4;
          return _regeneratorRuntime.awrap(driver.elementByName("Calculator"));

        case 4:
        case 'end':
          return context$2$0.stop();
      }
    }, null, _this);
  });
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInRlc3RcXGUyZVxcZHJpdmVyLWUyZS1zcGVjcy5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7OztrQkFBZSxJQUFJOzs7O29CQUNGLE1BQU07Ozs7OEJBQ0ksa0JBQWtCOzs7O3lCQUNqQixrQkFBa0I7O0FBQzlDLGtCQUFLLE1BQU0sRUFBRSxDQUFDO0FBQ2Qsa0JBQUssR0FBRyw2QkFBZ0IsQ0FBQzs7QUFFekIsSUFBTSxTQUFTLEdBQUcsSUFBSSxDQUFDO0FBQ3ZCLElBQU0sU0FBUyxHQUFHLFdBQVcsQ0FBQzs7QUFFOUIsSUFBSSxNQUFNLFlBQUE7SUFBRSxNQUFNLFlBQUEsQ0FBQzs7QUFFbkIsUUFBUSxDQUFDLFFBQVEsRUFBRSxZQUFNO0FBQ3ZCLFFBQU0sQ0FBQzs7Ozs7MkNBQ1UsNEJBQVksU0FBUyxFQUFFLFNBQVMsQ0FBQzs7O0FBQWhELGdCQUFNOzs7Ozs7O0dBQ1AsQ0FBQyxDQUFDOztBQUVILE9BQUssQ0FBQzs7Ozs7MkNBQ0UsTUFBTSxDQUFDLEtBQUssRUFBRTs7Ozs7OztHQUNyQixDQUFDLENBQUM7O0FBRUgsWUFBVSxDQUFDOzs7O0FBQ1QsZ0JBQU0sR0FBRyxnQkFBRyxrQkFBa0IsQ0FBQyxTQUFTLEVBQUUsU0FBUyxDQUFDLENBQUM7Ozs7Ozs7R0FDdEQsQ0FBQyxDQUFDOztBQUVILFdBQVMsQ0FBQzs7Ozs7MkNBQ0YsTUFBTSxDQUFDLElBQUksRUFBRTs7Ozs7OztHQUNwQixDQUFDLENBQUM7O0FBRUgsSUFBRSxDQUFDLGdEQUFnRCxFQUFFOzs7OzsyQ0FDN0MsTUFBTSxDQUFDLElBQUksQ0FBQztBQUNoQixlQUFHLEVBQUUsK0NBQStDO0FBQ3BELHdCQUFZLEVBQUUsU0FBUztBQUN2QixzQkFBVSxFQUFFLFdBQVc7V0FDeEIsQ0FBQzs7OzsyQ0FDSSxNQUFNLENBQUMsYUFBYSxDQUFDLFlBQVksQ0FBQzs7Ozs7OztHQUN6QyxDQUFDLENBQUM7Q0FDSixDQUFDLENBQUMiLCJmaWxlIjoidGVzdFxcZTJlXFxkcml2ZXItZTJlLXNwZWNzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHdkIGZyb20gJ3dkJztcclxuaW1wb3J0IGNoYWkgZnJvbSAnY2hhaSc7XHJcbmltcG9ydCBjaGFpQXNQcm9taXNlZCBmcm9tICdjaGFpLWFzLXByb21pc2VkJztcclxuaW1wb3J0IHsgc3RhcnRTZXJ2ZXIgfSBmcm9tICcuLi8uLi9saWIvc2VydmVyJztcclxuY2hhaS5zaG91bGQoKTtcclxuY2hhaS51c2UoY2hhaUFzUHJvbWlzZWQpO1xyXG5cclxuY29uc3QgVEVTVF9QT1JUID0gNDc4ODtcclxuY29uc3QgVEVTVF9IT1NUID0gXCJsb2NhbGhvc3RcIjtcclxuXHJcbmxldCBzZXJ2ZXIsIGRyaXZlcjtcclxuXHJcbmRlc2NyaWJlKCdEcml2ZXInLCAoKSA9PiB7XHJcbiAgYmVmb3JlKGFzeW5jICgpID0+IHtcclxuICAgIHNlcnZlciA9IGF3YWl0IHN0YXJ0U2VydmVyKFRFU1RfUE9SVCwgVEVTVF9IT1NUKTtcclxuICB9KTtcclxuXHJcbiAgYWZ0ZXIoYXN5bmMgKCkgPT4ge1xyXG4gICAgYXdhaXQgc2VydmVyLmNsb3NlKCk7XHJcbiAgfSk7XHJcblxyXG4gIGJlZm9yZUVhY2goYXN5bmMgKCkgPT4ge1xyXG4gICAgZHJpdmVyID0gd2QucHJvbWlzZUNoYWluUmVtb3RlKFRFU1RfSE9TVCwgVEVTVF9QT1JUKTtcclxuICB9KTtcclxuXHJcbiAgYWZ0ZXJFYWNoKGFzeW5jICgpID0+IHtcclxuICAgIGF3YWl0IGRyaXZlci5xdWl0KCk7XHJcbiAgfSk7XHJcblxyXG4gIGl0KCdzaG91bGQgcnVuIGEgYmFzaWMgc2Vzc2lvbiB1c2luZyBhIHJlYWwgY2xpZW50JywgYXN5bmMgKCkgPT4ge1xyXG4gICAgYXdhaXQgZHJpdmVyLmluaXQoe1xyXG4gICAgICBhcHA6IFwiTWljcm9zb2Z0LldpbmRvd3NDYWxjdWxhdG9yXzh3ZWt5YjNkOGJid2UhQXBwXCIsXHJcbiAgICAgIHBsYXRmb3JtTmFtZTogXCJXaW5kb3dzXCIsXHJcbiAgICAgIGRldmljZU5hbWU6IFwiV2luZG93c1BDXCJcclxuICAgIH0pO1xyXG4gICAgYXdhaXQgZHJpdmVyLmVsZW1lbnRCeU5hbWUoXCJDYWxjdWxhdG9yXCIpO1xyXG4gIH0pO1xyXG59KTsiXX0=